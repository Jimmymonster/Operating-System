# Case Study 2 <br>
ทำไงให้โปรแกรม Default ทำงานถูกต้อง queue เรียงจากน้อยไปมาก

## Default 
### ปัญหาที่พบในการรัน Default <br>
ตัวเลขไม่เรียงกัน ตัวเลขบางตัวหายไป ตัวเลขบางตัวซ้ำกัน

## Version 1 เช็ค queue
เนื่องจากตัวเลขไม่เรียงกันและตัวเลขซ้ำจากข้อที่แล้ว เนื่องจากไม่ได้เช็คว่า queue เต็มหรือ queue หมดรึเปล่า ใน default ถ้า quque เต็มจะทำการ enqueue ทับไปเลยทำให้ตัวเลขบางตัวหายไป ใน version ที่ 1 จึงทำการเช็คว่า enqueue หรือ dequeue ได้ไหมถ้าไม่ได้ให้รอก่อนโดยใช้ Monitor.Wait(lock)<br>
### ปัญหาที่พบใน Version 1
หลังจากแก้ไขปัญหาจาก default ทำให้โปรแกรมสามารถรันแล้ว enqueue กับ dequeue ตัวเลขเรียงกันได้และตัวเลขออกมาครบทุกตัวถ้ามีแค่ Thread เดียวในการ enqueue กับ dequeue แต่หลังจากลอง dequeue โดยการใช้ 2 thread และ 3 thread พบว่าตัวเลขออกมาครบทุกตัวแต่ลำดับไม่ถูกต้อง

## Version 2 lock dequeue
เนื่องจากตัวเลขไม่เรียงกันเพราะว่าใน thread dequeue มีการ Dequeue มาก่อนแต่ยังไม่ได้ print เลยอาจจะเกิดปัญหา dequeue มาแล้วแต่ได้ print ทีหลังซึ่งปัญหานี้สามารถแก้ได้โดยการ lock dequeue ในส่วนที่ dequeue และ print เข้าด้วยกัน
### ปัญหาที่พบใน Version 2
หลังจากแก้ไขปัญหาจาก Version ที่ 1 โปรแกรมก็ทำงานถูกต้องในกรณีที่มี Thread เดียว Enqueue และมีหลาย Thread Dequeue แต่ ในกรณีที่มีหลาย Thread Enqueue ยังทำให้ตัวเลขไม่เรียงกันเหมือนเดิม

## Version 3 lock enqueue
สาเหตุยังไม่รู้แต่เดี๋ยวคิดออกละมาเขียนต่อ
### ปัญหาที่พบใน Version 3
หลังจากแก้ไขปัญหาจาก Version ที่ 2 โปกแกรมก็ทำงานถูกต้องสมบูรณ์ในทุกกรณี
